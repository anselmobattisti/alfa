(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["deviceEdit"],{"4d7f":function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h2",[t._v("Edit Device")]),e("b-alert",{attrs:{show:t.msg.text,"v-show":t.msg.text,variant:t.msg.type}},[t._v("\n          "+t._s(t.msg.text)+"\n      ")]),e("b-form",{on:{submit:t.onSubmit}},[e("b-form-group",{attrs:{id:"input-group-1",label:"Name:","label-for":"name"}},[e("b-form-input",{attrs:{id:"name",type:"text",required:""},model:{value:t.form.name,callback:function(n){t.$set(t.form,"name",n)},expression:"form.name"}})],1),e("b-form-group",{attrs:{id:"input-group-3",label:"Edge Node:","label-for":"node"}},[e("b-form-select",{staticClass:"mt-3",staticStyle:{"margin-top":"0px!important"},attrs:{id:"nodeIp",options:t.nodes,size:"sm"},model:{value:t.form.nodeIp,callback:function(n){t.$set(t.form,"nodeIp",n)},expression:"form.nodeIp"}})],1),e("b-form-group",{attrs:{id:"input-group-1",label:"Physical Path:","label-for":"physicalPath"}},[e("b-form-input",{attrs:{id:"physicalPath",type:"text"},model:{value:t.form.physicalPath,callback:function(n){t.$set(t.form,"physicalPath",n)},expression:"form.physicalPath"}})],1),e("b-form-group",{attrs:{id:"input-group-3",label:"Connection Type:","label-for":"connectionType"}},[e("b-form-select",{staticClass:"mt-3",staticStyle:{"margin-top":"0px!important"},attrs:{id:"connectionType",options:t.connectionTypes,size:"sm"},model:{value:t.form.connectionType,callback:function(n){t.$set(t.form,"connectionType",n)},expression:"form.connectionType"}})],1),e("b-form-group",{attrs:{id:"input-group-2",label:"Connection Parameters:","label-for":"parameters"}},[e("b-textarea",{attrs:{id:"connectionParameters"},model:{value:t.form.connectionParameters,callback:function(n){t.$set(t.form,"connectionParameters",n)},expression:"form.connectionParameters"}})],1),e("b-form-group",{attrs:{id:"input-group-3",label:"Location:","label-for":"location"}},[e("b-form-select",{staticClass:"mt-3",staticStyle:{"margin-top":"0px!important"},attrs:{id:"location",options:t.locations,size:"sm"},model:{value:t.form.location,callback:function(n){t.$set(t.form,"location",n)},expression:"form.location"}})],1),e("b-form-group",{attrs:{id:"input-group-2",label:"Description:","label-for":"description"}},[e("b-form-input",{attrs:{id:"description",type:"text"},model:{value:t.form.description,callback:function(n){t.$set(t.form,"description",n)},expression:"form.description"}})],1),e("b-row",[e("b-col",[e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1),e("b-col",{staticClass:"text-right"},[e("b-button",{attrs:{to:"/device",variant:"secondary"}},[t._v("Back")])],1)],1)],1)],1)},a=[],i=(e("7f7f"),e("7668")),r=e("a0df"),c=e("827f"),s={name:"deviceEdit",data:function(){return{locations:[],nodes:[],connectionTypes:[],form:{id:"",name:"",physicalPath:"",connectionType:"",connectionParameters:"",location:"",description:"",nodeIp:"",node:""},msg:{text:!1,type:""}}},methods:{onSubmit:function(t){var n=this;t.preventDefault();for(var e=0;e<this.nodes.length;e++)this.nodes[e].value==this.form.nodeIp&&(this.form.node=this.nodes[e].id);i["a"].updateDevice(this.form).then((function(){n.msg.text="Device saved",n.msg.type="success"})).catch((function(t){n.msg.text="Error when saving device ".concat(t),n.msg.type="danger"}))},refresh:function(){var t=this;c["a"].getNodesForSelect().then((function(n){t.nodes=n})),r["a"].getLocationsForSelect().then((function(n){t.locations=n})),i["a"].getConnectionTypes().then((function(n){t.connectionTypes=n})),i["a"].getDevice(this.$route.params.id).then((function(n){t.form.id=n._id,t.form.name=n.name,t.form.physicalPath=n.physicalPath,t.form.connectionType=n.connectionType,t.form.connectionParameters=n.connectionParameters,t.form.description=n.description,t.form.location=n.location,t.form.node=n.node._id,t.form.nodeIp=n.node.ip;for(var e=0;e<t.nodes.length;e++)t.nodes[e].value==t.form.nodeIp&&(t.form.node=t.nodes[e].id)}))}},created:function(){this.refresh()}},f=s,m=e("2877"),d=Object(m["a"])(f,o,a,!1,null,null,null);n["default"]=d.exports},"827f":function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));e("7f7f"),e("ac6a");var o=e("db49"),a={newNode:function(t){return t?new Promise((function(n,e){o["a"].api.post("/node/",t).then((function(t){n(t.data)})).catch((function(t){e(new Error("Error when creating a new node ".concat(t)))}))})):Promise.reject(new Error("Data not informed"))},updateNode:function(t){return t?new Promise((function(n,e){o["a"].api.put("/node/".concat(t.id),t).then((function(t){n(t.data)})).catch((function(t){e(new Error("Error when updating a node ".concat(t)))}))})):Promise.reject(new Error("Data not informed"))},removeNode:function(t){return t?new Promise((function(n,e){o["a"].api.delete("/node/".concat(t)).then((function(t){n(t.data)})).catch((function(t){e(new Error("Error when removing a new node ".concat(t)))}))})):Promise.reject(new Error("Data not informed"))},getNodes:function(){return new Promise((function(t,n){o["a"].api.get("/node/").then((function(n){t(n.data)})).catch((function(t){n(t)}))}))},getNode:function(t){return new Promise((function(n,e){o["a"].api.get("/node/".concat(t)).then((function(t){n(t.data)})).catch((function(t){e(t)}))}))},getNodeImages:function(t){return new Promise((function(n,e){o["a"].api.get("/node/images/".concat(t)).then((function(t){n(t.data)})).catch((function(t){e(t)}))}))},getNodeStats:function(t){return new Promise((function(n,e){o["a"].api.get("/node/status/".concat(t)).then((function(t){n(t.data)})).catch((function(t){e(t)}))}))},getNodesForSelect:function(){return new Promise((function(t,n){o["a"].api.get("/node/").then((function(n){var e=[];n.data.forEach((function(t){e.push({value:t.ip,text:"".concat(t.name," ").concat(t.ip),id:t._id})})),t(e)})).catch((function(t){n(t)}))}))}}}}]);
//# sourceMappingURL=deviceEdit.0998df39.js.map